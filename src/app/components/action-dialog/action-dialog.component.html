<div class="dialog-overlay" (click)="onCancel()" (keydown.escape)="onCancel()" tabindex="-1">
  <div class="dialog-content" (click)="$event.stopPropagation()" (keydown)="$event.stopPropagation()" role="dialog" aria-modal="true" tabindex="-1">
    <div class="dialog-header">
      <h3>{{ dialogTitle }}</h3>
      <button class="close-btn" (click)="onCancel()">×</button>
    </div>
    
    <div class="dialog-body">
      <div class="form-group">
        <label for="actionName">Action Name</label>
        <input 
          id="actionName"
          type="text" 
          [(ngModel)]="actionName" 
          placeholder="Enter action name"
          class="form-input"
          maxlength="50">
      </div>
      
      <div class="form-group">
        <div class="form-label">Color</div>
        <div class="color-section">
          <div class="color-palette">
            @for (color of colorPalette; track color) {
              <button
                class="color-option"
                [class.selected]="actionColor === color"
                [style.background-color]="color"
                (click)="onColorSelect(color)"
                type="button">
              </button>
            }
          </div>
          
          <div class="custom-color">
            <label for="customColor">Custom Color:</label>
            <input 
              id="customColor"
              type="color" 
              [value]="actionColor"
              (change)="onCustomColorChange($event)"
              class="color-picker">
          </div>
        </div>
      </div>
      
      <div class="preview-section">
        <div class="form-label">Preview</div>
        <div class="action-preview">
          <div class="preview-color" 
               [style.background-color]="actionColor"
               [style.color]="getContrastColor(actionColor)">
            ●
          </div>
          <span class="preview-name">{{ actionName || 'Action Name' }}</span>
        </div>
      </div>
    </div>
    
    <div class="dialog-footer">
      <button class="btn btn-secondary" (click)="onCancel()">
        Cancel
      </button>
      <button 
        class="btn btn-primary" 
        (click)="onSave()"
        [disabled]="!actionName.trim()">
        {{ isEditing ? 'Update' : 'Create' }}
      </button>
    </div>
  </div>
</div>
