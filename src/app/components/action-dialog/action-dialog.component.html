<div class="dialog-overlay" (click)="onCancel()" (keydown.escape)="onCancel()" tabindex="-1">
  <div class="dialog-content" (click)="$event.stopPropagation()" (keydown)="$event.stopPropagation()" role="dialog" aria-modal="true" tabindex="-1">
    <div class="dialog-header">
      <h3>{{ dialogTitle }}</h3>
      <button class="close-btn" (click)="onCancel()">×</button>
    </div>
    
    <div class="dialog-body">
      <div class="form-group">
        <label for="actionName">Action Name</label>
        <input 
          id="actionName"
          type="text" 
          [(ngModel)]="actionName" 
          placeholder="Enter action name"
          class="form-input"
          maxlength="50">
      </div>
      
      <div class="form-group">
        <label class="form-label">Color Group</label>

        <div class="color-groups-section">
          <div class="color-groups-grid">
            @for (group of colorGroups; track group.id) {
              <button
                class="color-group-option"
                [class.selected]="selectedColorGroupId === group.id"
                [style.background-color]="group.color"
                [style.color]="getContrastColor(group.color)"
                (click)="onColorGroupSelect(group.id)"
                type="button"
                [title]="group.name">
                {{ group.name }}
              </button>
            }
          </div>
        </div>
      </div>
      
      <div class="preview-section">
        <div class="form-label">Preview</div>
        <div class="action-preview">
          <div class="preview-color" 
               [style.background-color]="getSelectedColorGroup()?.color || '#cccccc'"
               [style.color]="getContrastColor(getSelectedColorGroup()?.color || '#cccccc')">
            ●
          </div>
          <span class="preview-name">{{ actionName || 'Action Name' }}</span>
          <span class="preview-group">{{ getSelectedColorGroup()?.name || 'No Group Selected' }}</span>
        </div>
      </div>
    </div>
    
    <div class="dialog-footer">
      <button class="btn btn-secondary" (click)="onCancel()">
        Cancel
      </button>
      <button 
        class="btn btn-primary" 
        (click)="onSave()"
        [disabled]="!actionName.trim() || !selectedColorGroupId">
        {{ isEditing ? 'Update' : 'Create' }}
      </button>
    </div>
  </div>
</div>
